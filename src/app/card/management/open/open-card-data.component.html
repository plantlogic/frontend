<div class="jumbotron p-3 container">
  <h2 *ngIf="!card">Loading...</h2>
  <div *ngIf="card" >
    
    <!-- Ranch Information Display -->
    <div class="row">
      <div class="col-md">
        <h5>
          <b>Ranch:</b>
          <i> {{getRanchName(card.ranchName)}}</i>
        </h5>
        <h5>
          <b>Lot #:</b>
          <i> {{card.lotNumber}}</i>
        </h5>
      </div>
      <div *ngIf="editable" class="col-md">
        <button *ngIf="card && !editing" type="button" class="btn btn-warning mt-n2 float-right" (click)="toggleEditing()">
        <span>Edit <i class="fas fa-edit ml-1"></i></span>
        </button>
        <button *ngIf="card && editable && (editing || editingComment)" type="button" class="btn btn-light mt-n2 float-right" (click)="clearChanges()">
        <span>Cancel <i class="fas fa-trash ml-1"></i></span>
        </button>
        <button *ngIf="card && editable && editing" type="button" class="btn btn-success mt-n2 float-right" (click)="saveChanges()">
        <span>Save <i class="fas fa-save ml-1"></i></span>
        </button>
      </div>
      <div *ngIf="!editable" class="col-md">
        <button *ngIf="card && !editingComment" type="button" class="btn btn-warning mt-n2 float-right" (click)="toggleEditingComment()">
        <span>Edit Comments<i class="fas fa-edit ml-1"></i></span>
        </button>
        <button *ngIf="card && editingComment" type="button" class="btn btn-light mt-n2 float-right" (click)="clearChanges()">
        <span>Cancel <i class="fas fa-trash ml-1"></i></span>
        </button>
        <button *ngIf="card && editingComment" type="button" class="btn btn-success mt-n2 float-right" (click)="saveComments()">
        <span>Save Comments<i class="fas fa-save ml-1"></i></span>
        </button>
      </div>
    </div>

    <!-- Ranch Information Edit -->
    <div class="row justify-content-center mt-3">
      <div class="col-sm border p-4">
        <b>Ranch Name:</b>
        <br />
        <select class="form-control" [(ngModel)]="card.ranchName" [disabled]="!editing" #ranchName="ngModel" required="required">
        <option *ngFor="let r of getCommon('ranches')" [value]="r.id">{{r.value}}</option>
        </select>
        <br />
        <b>Ranch Manager:</b>
        <br />
        <input type="text" [(ngModel)]="card.ranchManagerName" [disabled]="!editing" class="form-control" />
        <br />
        <b>Crop Year:</b>
        <br />
        <input type="number" [(ngModel)]="card.cropYear" [disabled]="!editing" class="form-control"
        [min]="1000" [max]="9999"  #cropYear="ngModel"/>
      </div>
      <div class="col-sm border p-4">
        <b>Lot #:</b>
        <br />
        <input type="text" [(ngModel)]="card.lotNumber" [disabled]="!editing" class="form-control" />
        <br />
        <ng-container *ngIf="!isShipper()">
          <b>Field ID:</b>
          <br />
          <input type="number" [(ngModel)]="card.fieldID" [disabled]="!editing" class="form-control" />
          <br />
        </ng-container>
        <b>Shippers:</b>
        <br />
        <div class="form-group">
          <ng-multiselect-dropdown
          id="shipperSelector"
          [(ngModel)]="cardShippers"
          [placeholder]="'Select Shipper Access'"
          [data]="common.getValues('shippers')"
          [settings]="multiSelectSettings"
          [disabled]="!editing">
          </ng-multiselect-dropdown>
        </div>
        <br />
        <b>Planter Number</b>
        <br />
        <input type="text" [(ngModel)]="card.planterNumber" [disabled]="!editing" class="form-control" />
      </div>

      <div class="col-sm border p-4">
        <b>Wet Date:</b>
        <br />
        <div *ngIf="!editing">
          {{card.wetDate | date:'shortDate'}}
        </div>
        <div *ngIf="editing">
          <input class="date" [ngModel]="card.wetDate | date:'yyyy-MM-dd'" (ngModelChange)="card.wetDate = fixDate($event)" type="date"/>
          <br />
        </div>
        <br />
        <b>Harvest Date:</b>
        <br />
        <div *ngIf="!editing">
          {{card.harvestDate | date:'shortDate'}}
        </div>
        <div *ngIf="editing">
          <input class="date" [ngModel]="card.harvestDate | date:'yyyy-MM-dd'" (ngModelChange)="card.harvestDate = fixDate($event);" type="date"/>
          <br />
        </div>
        <br />
        <b>Date Created:</b> {{card.dateCreated | date:'shortDate'}}
      </div>
    </div>

    <!-- Comments -->
    <div class="row mt-4">
    
      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-md-inline-block">
        <span class="float-right">
        <button type="button" color="primary" (click)="addComment()" mdbBtn floating="true" *ngIf="editing || editingComment" size="sm" mdbWavesEffect>
        <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
        </span>
        <div class="d-inline-flex">
          <a (click)="commentsCollapsed = !commentsCollapsed" class="text-primary">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': commentsCollapsed, 'fa-caret-down': !commentsCollapsed }"></i>
              <span style="color: black"><i class="fas fa-comments ml-1"></i> Comments</span>
            </h4>
          </a>
        </div>
        <div class="d-inline-flex ml-2">
          | Total: <i>{{getActiveComments()}}</i>
        </div>

        <div [class.collapse]="commentsCollapsed">
          <ul class="nav nav-tabs" id="commentsTab" role="tablist" >
            <li class="nav-item">
              <a class="nav-link active" id="all-comments-tab" (click)="showCommentTab('all-comments-tab','all')">All ({{getActiveComments()}})</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="grower-comments-tab" (click)="showCommentTab('grower-comments-tab','grower')">Growers ({{getActiveComments('grower')}})</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="shipper-comments-tab" (click)="showCommentTab('shipper-comments-tab','shipper')">Shippers ({{getActiveComments('shipper')}})</a>
            </li>
          </ul>
  
          <div class="tab-content" id="commentsTabContent">
            <div class="tab-pane fade show active" role="tabpanel" aria-labelledby="all-comments-tab">
              <table mdbTable *ngIf="card" class="table table-responsive">
                <thead>
                  <tr>
                    <th scope="col" class="small" style="width:15%;">Last Modified</th>
                    <th scope="col" class="small" style="width:15%;">Author</th>
                    <th scope="col" class="small" style="width:60%;">Message</th>
                    <th scope="col" class="small" >Options</th>
                  </tr>
                </thead>
                <tbody>
                  <tr mdbTableCol *ngFor="let c of getComments(); let i = index">
                    <ng-container *ngIf="!c.deleted">
                      <td>
                        {{c.dateModified | date:'short'}}
                      </td>
                      <td>
                        {{c.author}}
                      </td>
                      <td>
                        <textarea type="text" [(ngModel)]="c.body" [disabled]="!canEditComment(c)" class="form-control"
                        [placeholder]="editing ? 'Any Comments' : ''" maxlength="200" autosize>
                        </textarea>
                      </td>
                      <td *ngIf="editing || editingComment">
                        <button *ngIf="!canDeleteComment(c)" type="button" (click)="deleteComment(i)" mdbBtn floating="true"
                        size="sm" mdbWavesEffect disabled>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
                        <button *ngIf="canDeleteComment(c)" type="button" color="danger" (click)="deleteComment(i)" mdbBtn floating="true"
                        size="sm" mdbWavesEffect>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
                      </td>
                    </ng-container>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

      </div>

      <!-- Mobile / Small Devices -->
      <div class="col-sm d-md-none">
        <span class="float-right">
        <button type="button" color="primary" (click)="addComment()" mdbBtn floating="true" *ngIf="editing || editingComment" size="sm" mdbWavesEffect>
        <i class="fa fa-plus" aria-hidden="true"></i>
        </button>
        </span>
        <div class="d-inline-flex">
          <a (click)="commentsCollapsed = !commentsCollapsed" class="text-primary">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': commentsCollapsed, 'fa-caret-down': !commentsCollapsed }"></i>
              <span style="color: black"><i class="fas fa-comments ml-1"></i> Comments</span>
            </h4>
          </a>
        </div>
        <div class="d-inline-flex ml-2">
          | Total: <i>{{getActiveComments()}}</i>
        </div>
        
        <ng-container *ngIf="card">
          <div [class.collapse]="commentsCollapsed">
            <ul class="nav nav-tabs" id="commentsTab" role="tablist" >
              <li class="nav-item">
                <a class="nav-link active" id="all-comments-tab-m" (click)="showCommentTabMobile('all-comments-tab-m', 'all')">All ({{getActiveComments()}})</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="grower-comments-tab-m" (click)="showCommentTabMobile('grower-comments-tab-m','grower')">Growers ({{getActiveComments('grower')}})</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="shipper-comments-tab-m" (click)="showCommentTabMobile('shipper-comments-tab-m','shipper')">Shippers ({{getActiveComments('shipper')}})</a>
              </li>
            </ul>
            <div class="tab-pane fade show active" role="tabpanel" aria-labelledby="all-comments-tab-m">
              <div class="row"  *ngFor="let c of getComments(); let i = index">
                <ng-container *ngIf="!c.deleted">
                  <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                  <div class="w-100"></div>
                  <div class="col">Modified:&nbsp;{{c.dateModified | date:'short'}}</div>
                  <div class="w-100"></div>
                  <div class="col">Author:&nbsp;<b>{{c.author}}</b></div>
                  <div class="w-100"></div>
                  <div class="col">
                    <textarea type="text" [(ngModel)]="c.body" [disabled]="!canEditComment(c)" class="form-control" autosize></textarea>
                  </div>
                  <div class="w-100"></div>
                  <div class="col-sm" >
                    <ng-container *ngIf="editing || editingComment">
                      <div class="m-1">
                        <button *ngIf="!canDeleteComment(c)" type="button" (click)="deleteComment(i)" mdbBtn floating="true" size="sm" mdbWavesEffect disabled>
                          <i class="ml-1 fa fa-trash" aria-hidden="true"></i>
                        </button>
                        <button *ngIf="canDeleteComment(c)" type="button" color="danger" (click)="deleteComment(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="ml-1 fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </ng-container>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </ng-container>
      </div>

      <div class="w-100 my-2"><hr /></div>
    </div>


    <!-- Commodities -->
    <div class="row mt-4">

      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-md-inline-block">
        <span class="float-right">
          <span class="mr-2">{{card.commodityArray.length}}/{{card.commodityMax}}</span>
          <button type="button" color="primary" (click)="addCommodities()" mdbBtn floating="true" *ngIf="editing && !card.commoditiesFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('commoditiesDesktop')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('commoditiesDesktop'), 'fa-caret-down': !isCollapsed('commoditiesDesktop') }"></i>
              <span style="color: black"><i class="fas fa-seedling ml-1"></i> Commodities</span>
            </h4>
          </a>
        </div>        

        <div class="d-inline-flex ml-2">
          | Total Acres: <i>{{card.totalAcres}}</i>
        </div>

        <div id="commoditiesDesktop">
          <table mdbTable *ngIf="card" class="table">
            <thead>
              <tr>
                <th scope="col" class="small">Commodity</th>
                <th scope="col" class="small">Varieties</th>
                <th scope="col" class="small">Bed Type</th>
                <th scope="col" class="small">Bed Count</th>
                <th scope="col" class="small">Acres</th>
                <th scope="col" class="small">Seed Lot #</th>
                <th scope="col" class="small" *ngIf="editing"></th>
              </tr>
            </thead>
            <tbody>
              <tr mdbTableCol *ngFor="let p of card.commodityArray; let i = index">
                <td>
                  <select class="form-control" [(ngModel)]="p.commodity" id="commodityInput" (ngModelChange)="p.variety = undefined" #commodityName="ngModel" [disabled]="!editing">
                  <option *ngIf="!p.commodity" [value]="undefined" disabled selected>Select Commodity</option>
                  <option *ngFor="let c of getCommon('commodities')" [value]="c.id">{{c.value.key}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" [(ngModel)]="p.variety" [disabled]="!editing" id="varietyInput">
                  <option *ngIf="!p.variety" [value]="undefined" disabled selected>Select Variety</option>
                  <option *ngFor="let v of getVarieties(p.commodity)" [value]="v">{{v}}</option>
                  </select>
                </td>
                <td>
                  <select class="form-control" [(ngModel)]="p.bedType" [disabled]="!editing">
                  <option *ngIf="!p.bedType" [value]="undefined" disabled selected>Select Bed Type</option>
                  <option *ngFor="let r of getCommon('bedTypes')" [value]="r.id">{{r.value}}</option>
                  </select>
                </td>
                <td>
                  <input type="number" [(ngModel)]="p.bedCount" [disabled]="!editing" class="form-control"
                  [placeholder]="editing ? 'Bed Count' : ''" />
                </td>
                <td>
                  <input type="number" [(ngModel)]="p.cropAcres" [disabled]="!editing" class="form-control"
                  [placeholder]="editing ? 'Acres' : ''" />
                </td>
                <td>
                  <input type="text" [(ngModel)]="p.seedLotNumber" [disabled]="!editing" class="form-control"
                  [placeholder]="editing ? 'Seed Lot #' : ''" />
                </td>
                <td *ngIf="editing">
                  <button type="button" color="danger" (click)="card.commodityArray.splice(i, 1)" mdbBtn floating="true"
                    size="sm" mdbWavesEffect>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>

      <!-- Mobile / Small Devices -->
      <div class="col-sm d-md-none">
        <span class="float-right">
          <button type="button" color="primary" (click)="addCommodities()" mdbBtn floating="true" *ngIf="editing && !card.commoditiesFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('commoditiesMobile')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('commoditiesMobile'), 'fa-caret-down': !isCollapsed('commoditiesMobile') }"></i>
              <span style="color: black"><i class="fas fa-seedling ml-1"></i> Commodities</span>
            </h4>
          </a>
        </div>

        <div class="d-inline-flex ml-2">
          | Total Acres: <i>{{card.totalAcres}}</i>
        </div>
        
        <ng-container *ngIf="card">
          <div id="commoditiesMobile">
            <div class="row" *ngFor="let p of card.commodityArray; let i = index">
              <div class="col-sm-12"><div class="w-100"><hr /></div></div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Commodities:</span>
                <select class="form-control" [(ngModel)]="p.commodity" id="commodityInput" (ngModelChange)="p.variety = undefined" #commodityName="ngModel" [disabled]="!editing">
                  <option *ngIf="!p.commodity" [value]="undefined" disabled selected>Commodity</option>
                  <option *ngFor="let c of getCommon('commodities')" [value]="c.id">{{c.value.key}}</option>
                </select>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Variety:</span>
                <select class="form-control" [(ngModel)]="p.variety" [disabled]="!editing" id="varietyInput">
                  <option *ngIf="!p.variety" [value]="undefined" disabled selected>Variety</option>
                  <option *ngFor="let v of getVarieties(p.commodity)" [value]="v">{{v}}</option>
                </select>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Bed Type:</span>
                <select class="form-control" [(ngModel)]="p.bedType" [disabled]="!editing">
                  <option *ngIf="!p.bedType" [value]="undefined" disabled selected>Bed Type</option>
                  <option *ngFor="let r of getCommon('bedTypes')" [value]="r.id">{{r.value}}</option>
                </select>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Bed Count:</span>
                <input type="number" [(ngModel)]="p.bedCount" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Bed Count' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Acres:</span>
                <input type="number" [(ngModel)]="p.cropAcres" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Acres' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Seed Lot #:</span>
                <input type="text" [(ngModel)]="p.seedLotNumber" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Seed Lot #' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col" *ngIf="editing">
                <div class="mt-3">
                  <button type="button" color="danger" (click)="card.commodityArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                    <i class="ml-1 fa fa-trash" aria-hidden="true"></i> Commodity
                  </button>
                </div>
              </div>            
            </div>
          </div>
        </ng-container>
      </div>

      <div class="w-100 my-2"><hr /></div>
    </div>

    <!-- Thinning Crew Entries -->
    <div class="row mt-4" *ngIf="!isShipper()">
      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-md-inline-block">
        <span class="float-right">
          <span class="mr-2">{{card.thinCrewsArray.length}}/{{card.thinCrewsMax}}</span>
          <button type="button" color="primary" (click)="addThinCrewEntry()" mdbBtn floating="true" *ngIf="editing && !card.thinCrewsFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('thinCrewsDesktop')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('thinCrewsDesktop'), 'fa-caret-down': !isCollapsed('thinCrewsDesktop') }"></i>
              <span style="color: black"><i class="fas fa-cut ml-1"></i> Thinning </span>
            </h4>
          </a>
        </div>        

        <div id="thinCrewsDesktop">
          <table mdbTable *ngIf="card" class="table">
            <thead>
              <tr>
                <th scope="col" class="small">Date</th>
                <th scope="col" class="small" style="width: 20%;">Crew</th>
                <th scope="col" class="small" style="width: 10%;"># Employees</th>
                <th scope="col" class="small" style="width: 10%;">Hours Worked</th>
                <th scope="col" class="small">$/Acre</th>
                <th scope="col" class="small">Comments</th>
                <th scope="col" class="small" *ngIf="editing"></th>
              </tr>
            </thead>
            <tbody>
              <tr mdbTableCol *ngFor="let t of card.thinCrewsArray; let i = index">
                <td>
                  <div *ngIf="!editing"> {{t.date | date:'shortDate'}} </div>
                  <input *ngIf="editing" class="date" [ngModel]="t.date | date:'yyyy-MM-dd'" (ngModelChange)="t.date = fixDate($event)" type="date"/>
                </td>
                <td>
                  <select class="form-control" [ngModel]="t.crew" (ngModelChange)="t.crew = $event; updateThinCrewCPA(i)" [disabled]="!editing" id="crewInput">
                  <option *ngIf="!t.crew" [value]="undefined" disabled selected>Select Crew</option>
                  <option *ngFor="let v of getCommon('thinHoeCrew')" [value]="v.id">{{v.value.key}}</option>
                  </select>
                </td>
                <td>
                  <input type="number" [ngModel]="t.numEmployees" (ngModelChange)="t.numEmployees=$event; updateThinCrewCPA(i)" [disabled]="!editing" class="form-control" [placeholder]="editing ? '# Employees' : ''" />
                </td>
                <td>
                  <input type="number" [ngModel]="t.hoursWorked" (ngModelChange)="t.hoursWorked=$event; updateThinCrewCPA(i)" [disabled]="!editing" class="form-control" step="0.5" [placeholder]="editing ? 'Hours Worked' : ''" />
                </td>
                <td>
                  <span>{{t.cpa | number: '1.2-2'}}</span>
                </td>
                <td>
                  <textarea type="text" [(ngModel)]="t.comment" [disabled]="!editing" class="form-control" autosize></textarea>
                </td>
                <td *ngIf="editing">
                  <button type="button" color="danger" (click)="card.thinCrewsArray.splice(i, 1)" mdbBtn floating="true"
                    size="sm" mdbWavesEffect>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Mobile / Small Devices -->
      <div class="col-sm d-md-none">
        <span class="float-right">
          <span class="mr-2">{{card.thinCrewsArray.length}}/{{card.thinCrewsMax}}</span>
          <button type="button" color="primary" (click)="addThinCrewEntry()" mdbBtn floating="true" *ngIf="editing && !card.thinCrewsFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>
        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('thinCrewsMobile')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('thinCrewsMobile'), 'fa-caret-down': !isCollapsed('thinCrewsMobile') }"></i>
              <span style="color: black"><i class="fas fa-cut ml-1"></i> Thinning </span>
            </h4>
          </a>
        </div>
        <ng-container *ngIf="card">
          <div id="thinCrewsMobile">
            <div class="row" *ngFor="let t of card.thinCrewsArray; let i = index">
              <div class="col-sm-12 mt-1 mb-1"><div class="w-100"><hr /></div></div>
              <div class="col mt-1 mb-1">
                <div class="row">
                  <div class="col">Date</div>
                  <div class="col">
                    <div *ngIf="!editing"> {{t.date | date:'shortDate'}} </div>
                    <input *ngIf="editing" class="date" [ngModel]="t.date | date:'yyyy-MM-dd'" (ngModelChange)="t.date = fixDate($event)" type="date"/>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row no-gutters">
                  <div class="col">
                    <span class="m-2">Thinning Crew:</span>
                    <select class="form-control" [ngModel]="t.crew" (ngModelChange)="t.crew = $event; updateThinCrewCPA(i)" [disabled]="!editing" class="form-control">
                      <option *ngIf="!t.crew" [value]="undefined" disabled selected>Select Crew</option>
                      <option *ngFor="let v of getCommon('thinHoeCrew')" [value]="v.id">{{v.value.key}}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2"># Employees:</span>
                <input type="number" [ngModel]="t.numEmployees" (ngModelChange)="t.numEmployees=$event; updateThinCrewCPA(i)" [disabled]="!editing" class="form-control" [placeholder]="editing ? '# Employees' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Hours Worked:</span>
                <input type="number" [ngModel]="t.hoursWorked" (ngModelChange)="t.hoursWorked=$event; updateThinCrewCPA(i)" [disabled]="!editing" class="form-control" step="0.5" [placeholder]="editing ? 'Hours Worked' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col mt-2 mb-2">
                <span class="m-2">$/Acre: {{t.cpa | number: '1.2-2'}}</span>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Comments:</span>
                <textarea type="text" [(ngModel)]="t.comment" [disabled]="!editing" class="form-control" autosize></textarea>
              </div>
              <div class="w-100"></div>
              <div class="col mt-3">
                <button *ngIf="editing"  type="button" color="danger" (click)="card.thinCrewsArray.splice(i, 1)" mdbBtn floating="true"
                    size="sm" mdbWavesEffect>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="w-100 my-2"><hr /></div>
    </div>

    <!-- Hoeing Crew Entries -->
    <div class="row mt-4" *ngIf="!isShipper()">
      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-md-inline-block">
        <span class="float-right">
          <span class="mr-2">{{card.hoeCrewsArray.length}}/{{card.hoeCrewsMax}}</span>
          <button type="button" color="primary" (click)="addHoeCrewEntry()" mdbBtn floating="true" *ngIf="editing && !card.hoeCrewsFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>
        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('hoeCrewsDesktop')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('hoeCrewsDesktop'), 'fa-caret-down': !isCollapsed('hoeCrewsDesktop') }"></i>
              <span style="color: black"><i class="fas fa-layer-group ml-1"></i> Hoeing </span>
            </h4>
          </a>
        </div>
        <div id="hoeCrewsDesktop">
          <table mdbTable *ngIf="card" class="table">
            <thead>
              <tr>
                <th scope="col" class="small">Date</th>
                <th scope="col" class="small" style="width: 20%;">Crew</th>
                <th scope="col" class="small" style="width: 10%;"># Employees</th>
                <th scope="col" class="small" style="width: 10%;">Hours Worked</th>
                <th scope="col" class="small">$/Acre</th>
                <th scope="col" class="small">Rehoe</th>
                <th scope="col" class="small">Comments</th>
                <th scope="col" class="small" *ngIf="editing"></th>
              </tr>
            </thead>
            <tbody>
              <tr mdbTableCol *ngFor="let t of card.hoeCrewsArray; let i = index">
                <td>
                  <div *ngIf="!editing"> {{t.date | date:'shortDate'}} </div>
                  <input *ngIf="editing" class="date" [ngModel]="t.date | date:'yyyy-MM-dd'" (ngModelChange)="t.date = fixDate($event)" type="date"/>
                </td>
                <td>
                  <select class="form-control" [ngModel]="t.crew" (ngModelChange)="t.crew = $event; updateHoeCrewCPA(i)" [disabled]="!editing" id="crewInput">
                  <option *ngIf="!t.crew" [value]="undefined" disabled selected>Select Crew</option>
                  <option *ngFor="let v of getCommon('thinHoeCrew')" [value]="v.id">{{v.value.key}}</option>
                  </select>
                </td>
                <td>
                  <input type="number" [ngModel]="t.numEmployees" (ngModelChange)="t.numEmployees=$event; updateHoeCrewCPA(i)" [disabled]="!editing" class="form-control" [placeholder]="editing ? '# Employees' : ''" />
                </td>
                <td>
                  <input type="number" [ngModel]="t.hoursWorked" (ngModelChange)="t.hoursWorked=$event; updateHoeCrewCPA(i)" [disabled]="!editing" class="form-control" step="0.5" [placeholder]="editing ? 'Hours Worked' : ''" />
                </td>
                <td>
                  <span>{{t.cpa | number: '1.2-2'}}</span>
                </td>
                <td>
                  <input type="checkbox" [(ngModel)]="t.rehoe" [disabled]="!editing" class="form-control"/>
                </td>
                <td>
                  <textarea type="text" [(ngModel)]="t.comment" [disabled]="!editing" class="form-control" autosize></textarea>
                </td>
                <td *ngIf="editing">
                  <button type="button" color="danger" (click)="card.hoeCrewsArray.splice(i, 1)" mdbBtn floating="true"
                    size="sm" mdbWavesEffect>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- Mobile / Small Devices -->
      <div class="col-sm d-md-none">
        <span class="float-right">
          <span class="mr-2">{{card.hoeCrewsArray.length}}/{{card.hoeCrewsMax}}</span>
          <button type="button" color="primary" (click)="addHoeCrewEntry()" mdbBtn floating="true" *ngIf="editing && !card.hoeCrewsFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>
        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('hoeCrewsMobile')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('hoeCrewsMobile'), 'fa-caret-down': !isCollapsed('hoeCrewsMobile') }"></i>
              <span style="color: black"><i class="fas fa-layer-group ml-1"></i> Hoeing </span>
            </h4>
          </a>
        </div>
        <ng-container *ngIf="card">
          <div id="hoeCrewsMobile">
            <div class="row" *ngFor="let t of card.hoeCrewsArray; let i = index">
              <div class="col-sm-12 mt-1 mb-1"><div class="w-100"><hr /></div></div>
              <div class="col mt-1 mb-1">
                <div class="row">
                  <div class="col">Date</div>
                  <div class="col">
                    <div *ngIf="!editing"> {{t.date | date:'shortDate'}} </div>
                    <input *ngIf="editing" class="date" [ngModel]="t.date | date:'yyyy-MM-dd'" (ngModelChange)="t.date = fixDate($event)" type="date"/>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row no-gutters">
                  <div class="col">
                    <span class="m-2">Hoeing Crew:</span>
                    <select class="form-control" [ngModel]="t.crew" (ngModelChange)="t.crew = $event; updateHoeCrewCPA(i)" [disabled]="!editing" class="form-control">
                      <option *ngIf="!t.crew" [value]="undefined" disabled selected>Select Crew</option>
                      <option *ngFor="let v of getCommon('thinHoeCrew')" [value]="v.id">{{v.value.key}}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2"># Employees:</span>
                <input type="number" [ngModel]="t.numEmployees" (ngModelChange)="t.numEmployees=$event; updateHoeCrewCPA(i)" [disabled]="!editing" class="form-control" [placeholder]="editing ? '# Employees' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Hours Worked:</span>
                <input type="number" [ngModel]="t.hoursWorked" (ngModelChange)="t.hoursWorked=$event; updateHoeCrewCPA(i)" [disabled]="!editing" class="form-control" step="0.5" [placeholder]="editing ? 'Hours Worked' : ''" />
              </div>
              <div class="w-100"></div>
              <div class="col mt-2 mb-2">
                <span class="m-2">$/Acre: {{t.cpa | number: '1.2-2'}}</span>
              </div>
              <div class="w-100"></div>
              <div class="col mt-2 mb-2">
                <span class="m-2">Rehoe:</span>
                <input type="checkbox" [(ngModel)]="t.rehoe" [disabled]="!editing" class="form-control"/>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <span class="m-2">Comments:</span>
                <textarea type="text" [(ngModel)]="t.comment" [disabled]="!editing" class="form-control" autosize></textarea>
              </div>
              <div class="w-100"></div>
              <div class="col mt-3">
                <button *ngIf="editing"  type="button" color="danger" (click)="card.hoeCrewsArray.splice(i, 1)" mdbBtn floating="true"
                    size="sm" mdbWavesEffect>Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i></button>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="w-100 my-2"><hr /></div>
    </div>

    <!-- Pre Chemical Array -->
    <div class="row mt-4" *ngIf="!isShipper()">

      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-md-inline-block">
        <span class="float-right">
          <span class="mr-2">{{card.preChemicalArray.length}}/{{card.preChemicalsMax}}</span>
          <button type="button" color="primary" (click)="addPreChemicals()" mdbBtn floating="true" *ngIf="editing && !card.preChemicalsFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('prePlantDesktop')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('prePlantDesktop'), 'fa-caret-down': !isCollapsed('prePlantDesktop') }"></i>
              <span style="color: black"><i class="fas fa-angle-double-left ml-1 mr-1"></i>Pre-Plant Applications</span>
            </h4>
          </a>
        </div>
        
        <div id="prePlantDesktop">
          <table mdbTable *ngIf="card" class="table table-responsive">
            <thead>
              <tr>
                <th scope="col" class="small" style="width:10%">Date</th>
                <th scope="col" class="small" style="width:40%">Fertilizer /ac</th>
                <th scope="col" class="small" style="width:40%">Chemical /ac</th>
                <th scope="col" class="small" *ngIf="editing" style="width:10%"></th>
              </tr>
            </thead>
            <tbody>

              <tr mdbTableCol *ngFor="let p of card.preChemicalArray; let i = index">
                <td>
                  <div *ngIf="!editing"> {{p.date | date:'shortDate'}} </div>
                  <input *ngIf="editing" class="date" [ngModel]="p.date | date:'yyyy-MM-dd'" (ngModelChange)="p.date = fixDate($event)" type="date"/>
                </td>
                <td>
                  <div *ngIf="!p.fertilizer && editing">
                    <button type="button" color="success" (click)="p.fertilizer = newChemical()" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Fertilizer
                    </button>
                  </div>
                  <div *ngIf="p.fertilizer">
                    <div class="row no-gutters">
                      <div class="col">
                        <select class="form-control" [(ngModel)]="p.fertilizer.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!p.fertilizer.name" [value]="undefined" disabled selected>Select Fertilizer</option>
                          <option *ngFor="let r of getCommon('fertilizers')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <input type="number" [(ngModel)]="p.fertilizer.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                      </div>
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="p.fertilizer.unit">
                          <option *ngIf="!p.fertilizer.unit" [value]="undefined" disabled selected>Select Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <button *ngIf="editing" type="button" color="danger" (click)="p.fertilizer = undefined" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </td>
                <td>
                  <div *ngIf="!p.chemical && editing">
                    <button type="button" color="success" (click)="p.chemical = newChemical()" mdbBtn floating="true"
                      size="sm" mdbWavesEffect><i class="fa fa-plus mr-1" aria-hidden="true"></i> Chemical</button>
                  </div>
                  <div *ngIf="p.chemical">
                    <div class="row no-gutters">
                      <div class="col">
                        <select class="form-control" [(ngModel)]="p.chemical.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!p.chemical.name" [value]="undefined" disabled selected>Select Chemical</option>
                          <option *ngFor="let r of getCommon('chemicals')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <input type="number" [(ngModel)]="p.chemical.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                      </div>
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="p.chemical.unit" >
                          <option *ngIf="!p.chemical.unit" [value]="undefined" disabled selected>Select Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <button *ngIf="editing" type="button" color="danger" (click)="p.chemical = undefined" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </td>
                <td *ngIf="editing">
                  <button type="button" color="danger" (click)="card.preChemicalArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                    Delete<i class="ml-1 fa fa-trash" aria-hidden="true"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Mobile / Small Devices -->
      <div class="col-sm d-md-none">
        <span class="float-right">
          <span class="mr-2">{{card.preChemicalArray.length}}/{{card.preChemicalsMax}}</span>
          <button type="button" color="primary" (click)="addPreChemicals()" mdbBtn floating="true" *ngIf="editing && !card.preChemicalsFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('prePlantMobile')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('prePlantMobile'), 'fa-caret-down': !isCollapsed('prePlantMobile') }"></i>
              <span style="color: black"><i class="fas fa-angle-double-left ml-1 mr-1"></i>Pre-Plant Applications</span>
            </h4>
          </a>
        </div>
        
        <ng-container *ngIf="card">
          <div id="prePlantMobile">
            <div class="row" *ngFor="let p of card.preChemicalArray; let i = index">
              <div class="col-sm-12 mt-1 mb-1"><div class="w-100"><hr /></div></div>
              <div class="col mt-1 mb-1">
                <div class="row">
                  <div class="col">Date</div>
                  <div class="col">
                    <div *ngIf="!editing"> {{p.date | date:'shortDate'}} </div>
                    <input *ngIf="editing" class="date" [ngModel]="p.date | date:'yyyy-MM-dd'" (ngModelChange)="p.date = fixDate($event)" type="date"/>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div *ngIf="!p.fertilizer && editing">
                  <button type="button" color="success" (click)="p.fertilizer = newChemical()" mdbBtn floating="true" size="sm" mdbWavesEffect>
                    <i class="fa fa-plus mr-1" aria-hidden="true"></i> Fertilizer
                  </button>
                </div>
                <div *ngIf="p.fertilizer">
                  <div class="row no-gutters">
                    <div class="col">
                      <select class="form-control" [(ngModel)]="p.fertilizer.name" [disabled]="!editing" class="form-control">
                        <option *ngIf="!p.fertilizer.name" [value]="undefined" disabled selected>Fertilizer</option>
                        <option *ngFor="let r of getCommon('fertilizers')" [value]="r.id">{{r.value}}</option>
                      </select>
                    </div>
                    <div class="w-100"></div>
                    <div class="col">
                      <input type="number" [(ngModel)]="p.fertilizer.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate/ac' : ''" />
                    </div>
                    <div class="col">
                      <select class="form-control" [disabled]="!editing" [(ngModel)]="p.fertilizer.unit">
                        <option *ngIf="!p.fertilizer.unit" [value]="undefined" disabled selected>Rate Unit</option>
                        <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                      </select>
                    </div>
                    <div class="w-100"></div>
                    <div class="col m-1">
                      <button *ngIf="editing" type="button" color="danger" (click)="p.fertilizer = undefined" mdbBtn floating="true" size="sm" mdbWavesEffect>
                        <i class="fa fa-trash" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div *ngIf="!p.chemical && editing">
                  <button type="button" color="success" (click)="p.chemical = newChemical()" mdbBtn floating="true"
                    size="sm" mdbWavesEffect><i class="fa fa-plus mr-1" aria-hidden="true"></i> Chemical</button>
                </div>
                <div *ngIf="p.chemical">
                  <div class="row no-gutters">
                    <div class="col">
                      <select class="form-control" [(ngModel)]="p.chemical.name" [disabled]="!editing" class="form-control">
                        <option *ngIf="!p.chemical.name" [value]="undefined" disabled selected>Select Chemical</option>
                        <option *ngFor="let r of getCommon('chemicals')" [value]="r.id">{{r.value}}</option>
                      </select>
                    </div>
                    <div class="w-100"></div>
                    <div class="col">
                      <input type="number" [(ngModel)]="p.chemical.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                    </div>
                    <div class="col">
                      <select class="form-control" [disabled]="!editing" [(ngModel)]="p.chemical.unit" >
                        <option *ngIf="!p.chemical.unit" [value]="undefined" disabled selected>Select Rate Unit</option>
                        <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                      </select>
                    </div>
                    <div class="w-100"></div>
                    <div class="col m-1">
                      <button *ngIf="editing" type="button" color="danger" (click)="p.chemical = undefined" mdbBtn floating="true" size="sm" mdbWavesEffect>
                        <i class="fa fa-trash" aria-hidden="true"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col mt-3">
                <button type="button" color="danger" (click)="card.preChemicalArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                  <i class="ml-1 fa fa-trash" aria-hidden="true"></i> Pre-Plant Entry
                </button>
              </div>
            </div>
          </div>
        </ng-container>
      </div>

      <div class="w-100 my-2"><hr /></div>
    </div>


    <!-- Irrigation Array -->
    <div class="row mt-4" *ngIf="!isShipper()">

      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-lg-inline-block">
        <span class="float-right">
          <span class="mr-2">{{card.irrigationArray.length}}/{{card.irrigationMax}}</span>
            <button type="button" color="primary" (click)="addIrrigationData()" mdbBtn floating="true" *ngIf="editing && !card.irrigationFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('irrigationDesktop')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('irrigationDesktop'), 'fa-caret-down': !isCollapsed('irrigationDesktop') }"></i>
              <span style="color: black"><i class="fas fa-tint ml-1 mr-1"></i>Irrigation</span>
            </h4>
          </a>
        </div>

        <div id="irrigationDesktop">
          <table mdbTable *ngIf="card" class="table table-responsive">
            <thead>
              <tr>
                <th scope="col" class="small" style="width:5%">Date</th>
                <th scope="col" class="small" style="width:15%">Method</th>
                <th scope="col" class="small" style="width:15%">Application</th>
                <th scope="col" class="small" style="width:30%">Fertilizer /ac</th>
                <th scope="col" class="small" style="width:30%">Chemical /ac</th>
                <th scope="col" class="small" style="width:5%" *ngIf="editing"></th>
              </tr>
            </thead>

            <tbody>

              <tr mdbTableCol *ngFor="let p of card.irrigationArray; let i = index">

                <td>
                  <div *ngIf="!editing">{{p.workDate | date:'shortDate'}}</div>
                  <input type="date" *ngIf="editing" [ngModel]="p.workDate | date:'yyyy-MM-dd'" (ngModelChange)="p.workDate = fixDate($event)" />
                </td>

                <td>
                  <select class="form-control" [disabled]="!editing" [(ngModel)]="p.method" >
                    <option *ngIf="!p.method" [value]="undefined" disabled selected>Select Irrigation Method</option>
                    <option *ngFor="let r of getCommon('irrigationMethod')" [value]="r.id">{{r.value}}</option>
                  </select>
                </td>
                
                <td>
                  <div class="row">
                    <div class="col">
                      <input class="form-control" [disabled]="!editing" list="irrigators" [(ngModel)]="p.irrigator" placeholder="Irrigator">
                    </div>
                    <div class="w-100"></div>
                    <div class="col mt-1">
                      <span class="m-1">Duration:</span>
                      <input type="number" [(ngModel)]="p.duration" class="form-control" [disabled]="!editing" [placeholder]="editing ? 'Duration (hours)' : ''" >
                      <span class="m-1">Hours</span>
                    </div>
                  </div>
                </td>

                <td>
                  <div  *ngFor="let f of p.fertilizerArray; let j = index">
                    <div class="row no-gutters">

                      <div class="col">
                        <select class="form-control" [(ngModel)]="f.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!f.name" [value]="undefined" disabled selected>Select Fertilizer</option>
                          <option *ngFor="let r of getCommon('fertilizers')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col">
                        <input type="number" [(ngModel)]="f.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                      </div>

                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="f.unit">
                          <option *ngIf="!f.unit" [value]="undefined" disabled selected>Select Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col mt-1">
                        <button  *ngIf="editing" type="button" color="danger" (click)="p.fertilizerArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>

                    </div>
                  </div>
                  <div *ngIf="editing && !p.fertilizersFull()" class="mt-1">
                    <button type="button" color="success" (click)="addIrrigationFertilizer(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Fertilizer
                    </button>
                  </div>
                </td>

                <td>
                  <div *ngFor="let c of p.chemicalArray; let j = index">
                    <div class="row no-gutters">

                      <div class="col">
                        <select class="form-control" [(ngModel)]="c.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!c.name" [value]="undefined" disabled selected>Select Chemical</option>
                          <option *ngFor="let r of getCommon('chemicals')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col">
                        <input type="number" [(ngModel)]="c.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                      </div>
                      
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="c.unit">
                          <option *ngIf="!c.unit" [value]="undefined" disabled selected>Select Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col mt-1">
                        <button *ngIf="editing" type="button" color="danger" (click)="p.chemicalArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                      
                    </div>
                  </div>
                  <div *ngIf="editing && !p.chemicalsFull()" class="mt-1">
                    <button type="button" color="success" (click)="addIrrigationChemical(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Chemical
                    </button>
                  </div>
                </td>
                
                <td *ngIf="editing">
                  <button type="button" color="danger" (click)="card.irrigationArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                    Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i>
                  </button>
                </td>

              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Mobile / Small Devices -->
      <div class="col-sm d-lg-none">
        <span class="float-right">
          <span class="mr-2">{{card.irrigationArray.length}}/{{card.irrigationMax}}</span>
            <button type="button" color="primary" (click)="addIrrigationData()" mdbBtn floating="true" *ngIf="editing && !card.irrigationFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('irrigationMobile')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('irrigationMobile'), 'fa-caret-down': !isCollapsed('irrigationMobile') }"></i>
              <span style="color: black"><i class="fas fa-tint ml-1 mr-1"></i>Irrigation</span>
            </h4>
          </a>
        </div>

        <ng-container *ngIf="card">
          <div id="irrigationMobile">
            <div class="row" *ngIf="card.irrigationArray.length > 0"><div class="col-sm-12"><div class="w-100"><hr class="divider-sm"/></div></div></div>
            <div class="row" *ngFor="let p of card.irrigationArray; let i = index">
              <div class="w-100"></div>
              <div class="col">
                <div class="row mb-2">
                  <div class="col col-sm-3">Date: </div>
                  <div class="col col-sm-9">
                    <span *ngIf="!editing">{{p.workDate | date:'shortDate'}}</span>
                    <input *ngIf="editing" [ngModel]="p.workDate | date:'yyyy-MM-dd'" (ngModelChange)="p.workDate = fixDate($event)" type="date" />
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row">
                  <div class="col col-sm-3">Method: </div>
                  <div class="col col-sm-9">
                    <select class="form-control" [disabled]="!editing" [(ngModel)]="p.method" >
                      <option *ngIf="!p.method" [value]="undefined" disabled selected>Select Irrigation Method</option>
                      <option *ngFor="let r of getCommon('irrigationMethod')" [value]="r.id">{{r.value}}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row">
                  <div class="col col-sm-3">Irrigator:</div>
                  <div class="col col-sm-9">
                    <input class="form-control" [disabled]="!editing" list="irrigators" [(ngModel)]="p.irrigator" placeholder="Irrigator">
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row">
                  <div class="col col-sm-3">Duration (hours):</div>
                  <div class="col col-sm-9">
                    <input type="number" [(ngModel)]="p.duration" class="form-control" [disabled]="!editing" [placeholder]="editing ? 'Duration (hours)' : ''" >
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="m-2" style="text-align: center;"><b>Fertilizers /ac:</b></div>
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="row">
                  <div class="col col-sm-6" *ngFor="let f of p.fertilizerArray; let j = index">
                    <div class="row no-gutters">
                      <div class="col">
                        <select class="form-control" [(ngModel)]="f.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!f.name" [value]="undefined" disabled selected>Fertilizer</option>
                          <option *ngFor="let r of getCommon('fertilizers')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <input type="number" [(ngModel)]="f.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate/ac' : ''" />
                      </div>
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="f.unit">
                          <option *ngIf="!f.unit" [value]="undefined" disabled selected>Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col m-1">
                        <button  *ngIf="editing" type="button" color="danger" (click)="p.fertilizerArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="editing && !p.fertilizersFull()" class="col mt-1">
                    <button type="button" color="success" (click)="addIrrigationFertilizer(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Fertilizer
                    </button>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="m-2" style="text-align: center;"><b>Chemicals /ac:</b></div>
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="row">
                  <div class="col col-sm-6" *ngFor="let c of p.chemicalArray; let j = index">
                    <div class="row no-gutters">
                      <div class="col">
                        <select class="form-control" [(ngModel)]="c.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!c.name" [value]="undefined" disabled selected>Chemical</option>
                          <option *ngFor="let r of getCommon('chemicals')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <input type="number" [(ngModel)]="c.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate/ac' : ''" />
                      </div>                
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="c.unit">
                          <option *ngIf="!c.unit" [value]="undefined" disabled selected>Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col m-1">
                        <button *ngIf="editing" type="button" color="danger" (click)="p.chemicalArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="editing && !p.chemicalsFull()" class="col mt-1">
                    <button type="button" color="success" (click)="addIrrigationChemical(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Chemical
                    </button>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col mt-3" *ngIf="editing">
                <button type="button" color="danger" (click)="card.irrigationArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                  <i class="ml-1 fa fa-trash" aria-hidden="true"></i> Irrigation Entry
                </button>
              </div>
              <div class="col-sm-12"><div class="w-100"><hr class="divider-sm"/></div></div>
            </div>
          </div>
        </ng-container>
      </div>

      <div class="w-100 my-2"><hr /></div>
    </div>


    <!-- Tractor Array -->
    <div class="row mt-4" *ngIf="!isShipper()">

      <!-- Desktope / Large Devices -->
      <div class="col-md d-none d-lg-inline-block">
        <span class="float-right">
          <span class="mr-2">{{card.tractorArray.length}}/{{card.tractorMax}}</span>
            <button type="button" color="primary" (click)="addTractorData()" mdbBtn floating="true" *ngIf="editing && !card.tractorFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('tractorDesktop')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('tractorDesktop'), 'fa-caret-down': !isCollapsed('tractorDesktop') }"></i>
              <span style="color: black"><i class="fas fa-tractor ml-1 mr-1"></i>Tractor</span>
            </h4>
          </a>
        </div>

        <div id="tractorDesktop">
          <table mdbTable *ngIf="card" class="table table-responsive">
            <thead>
              <tr>
                <th scope="col" class="small" style="width:5%">Date</th>
                <th scope="col" class="small" style="width:15%">Work Done</th>
                <th scope="col" class="small" style="width:15%">Application</th>
                <th scope="col" class="small" style="width:30%">Fertilizer /ac</th>
                <th scope="col" class="small" style="width:30%">Chemical /ac</th>
                <th scope="col" class="small" style="width:5%" *ngIf="editing"></th>
              </tr>
            </thead>

            <tbody>

              <tr mdbTableCol *ngFor="let p of card.tractorArray; let i = index">

                <td>
                  <div *ngIf="!editing">{{p.workDate | date:'shortDate'}}</div>
                  <input type="date" *ngIf="editing" [ngModel]="p.workDate | date:'yyyy-MM-dd'" (ngModelChange)="p.workDate = fixDate($event)" />
                </td>

                <td>
                  <select class="form-control" [disabled]="!editing" [(ngModel)]="p.workDone" >
                    <option *ngIf="!p.workDone" [value]="undefined" disabled selected>Tractor Work</option>
                    <option *ngFor="let r of getCommon('tractorWork')" [value]="r.id">{{r.value}}</option>
                  </select>
                </td>
                
                <td>
                  <div class="row">
                    <div class="col">
                      <input class="form-control" [disabled]="!editing" list="tractorOperators" [(ngModel)]="p.operator" placeholder="Tractor Operator">
                    </div>
                    <div class="w-100"></div>
                    <div class="col mt-1">
                      <span class="m-1">Tractor #:</span>
                      <input type="text" class="form-control" [disabled]="!editing" [(ngModel)]="p.tractorNumber" placeholder="Tractor Number">
                    </div>
                  </div>
                </td>

                <td>
                  <div  *ngFor="let f of p.fertilizerArray; let j = index">
                    <div class="row no-gutters">

                      <div class="col">
                        <select class="form-control" [(ngModel)]="f.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!f.name" [value]="undefined" disabled selected>Fertilizer</option>
                          <option *ngFor="let r of getCommon('fertilizers')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col">
                        <input type="number" [(ngModel)]="f.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                      </div>

                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="f.unit">
                          <option *ngIf="!f.unit" [value]="undefined" disabled selected>Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col mt-1">
                        <button  *ngIf="editing" type="button" color="danger" (click)="p.fertilizerArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>

                    </div>
                  </div>
                  <div *ngIf="editing && !p.fertilizersFull()" class="mt-1">
                    <button type="button" color="success" (click)="addTractorFertilizer(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Fertilizer
                    </button>
                  </div>
                </td>

                <td>
                  <div *ngFor="let c of p.chemicalArray; let j = index">
                    <div class="row no-gutters">

                      <div class="col">
                        <select class="form-control" [(ngModel)]="c.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!c.name" [value]="undefined" disabled selected>Chemical</option>
                          <option *ngFor="let r of getCommon('chemicals')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col">
                        <input type="number" [(ngModel)]="c.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate (Per Acre)' : ''" />
                      </div>
                      
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="c.unit">
                          <option *ngIf="!c.unit" [value]="undefined" disabled selected>Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>

                      <div class="w-100"></div>

                      <div class="col mt-1">
                        <button *ngIf="editing" type="button" color="danger" (click)="p.chemicalArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                      
                    </div>
                  </div>
                  <div *ngIf="editing && !p.chemicalsFull()" class="mt-1">
                    <button type="button" color="success" (click)="addTractorChemical(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Chemical
                    </button>
                  </div>
                </td>
                
                <td *ngIf="editing">
                  <button type="button" color="danger" (click)="card.tractorArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                    Delete <i class="ml-1 fa fa-trash" aria-hidden="true"></i>
                  </button>
                </td>

              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Mobile / Small Devices -->
      <div class="col-sm d-lg-none">
        <span class="float-right">
          <span class="mr-2">{{card.tractorArray.length}}/{{card.tractorMax}}</span>
            <button type="button" color="primary" (click)="addTractorData()" mdbBtn floating="true" *ngIf="editing && !card.tractorFull()" size="sm" mdbWavesEffect>
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </span>

        <div class="d-inline-flex">
          <a class="text-primary" (click)="collapseToggle('tractorMobile')">
            <h4>
              <i class="fas mr-1" [ngClass]="{ 'fa-caret-right': isCollapsed('tractorMobile'), 'fa-caret-down': !isCollapsed('tractorMobile') }"></i>
              <span style="color: black"><i class="fas fa-tractor ml-1 mr-1"></i>Tractor</span>
            </h4>
          </a>
        </div>

        <ng-container *ngIf="card">
          <div id="tractorMobile">
            <div class="row" *ngIf="card.tractorArray.length > 0"><div class="col-sm-12"><div class="w-100"><hr class="divider-sm"/></div></div></div>
            <div class="row" *ngFor="let p of card.tractorArray; let i = index">
              <div class="w-100"></div>
              <div class="col">
                <div class="row mb-2">
                  <div class="col col-sm-3">Date: </div>
                  <div class="col col-sm-9">
                    <span *ngIf="!editing">{{p.workDate | date:'shortDate'}}</span>
                    <input *ngIf="editing" [ngModel]="p.workDate | date:'yyyy-MM-dd'" (ngModelChange)="p.workDate = fixDate($event)" type="date" />
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row">
                  <div class="col col-sm-3">Work Done: </div>
                  <div class="col col-sm-9">
                    <select class="form-control" [disabled]="!editing" [(ngModel)]="p.workDone" >
                      <option *ngIf="!p.workDone" [value]="undefined" disabled selected>Tractor Work</option>
                      <option *ngFor="let r of getCommon('tractorWork')" [value]="r.id">{{r.value}}</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row">
                  <div class="col col-sm-3">Operator:</div>
                  <div class="col col-sm-9">
                    <input class="form-control" [disabled]="!editing" list="tractorOperators" [(ngModel)]="p.operator" placeholder="Tractor Operator">
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="row">
                  <div class="col col-sm-3">Tractor #:</div>
                  <div class="col col-sm-9">
                    <input type="text" class="form-control" [disabled]="!editing" [(ngModel)]="p.tractorNumber" placeholder="Tractor Number">
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="m-2" style="text-align: center;"><b>Fertilizers /ac:</b></div>
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="row">
                  <div class="col col-sm-6" *ngFor="let f of p.fertilizerArray; let j = index">
                    <div class="row no-gutters">
                      <div class="col">
                        <select class="form-control" [(ngModel)]="f.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!f.name" [value]="undefined" disabled selected>Fertilizer</option>
                          <option *ngFor="let r of getCommon('fertilizers')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <input type="number" [(ngModel)]="f.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate/ac' : ''" />
                      </div>
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="f.unit">
                          <option *ngIf="!f.unit" [value]="undefined" disabled selected>Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col m-1">
                        <button  *ngIf="editing" type="button" color="danger" (click)="p.fertilizerArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="editing && !p.fertilizersFull()" class="col mt-1">
                    <button type="button" color="success" (click)="addTractorFertilizer(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Fertilizer
                    </button>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col">
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="m-2" style="text-align: center;"><b>Chemicals /ac:</b></div>
                <div class="col-sm-12"><div class="w-100"><hr /></div></div>
                <div class="row">
                  <div class="col col-sm-6" *ngFor="let c of p.chemicalArray; let j = index">
                    <div class="row no-gutters">
                      <div class="col">
                        <select class="form-control" [(ngModel)]="c.name" [disabled]="!editing" class="form-control">
                          <option *ngIf="!c.name" [value]="undefined" disabled selected>Chemical</option>
                          <option *ngFor="let r of getCommon('chemicals')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col">
                        <input type="number" [(ngModel)]="c.rate" [disabled]="!editing" class="form-control" [placeholder]="editing ? 'Rate/ac' : ''" />
                      </div>                
                      <div class="col">
                        <select class="form-control" [disabled]="!editing" [(ngModel)]="c.unit">
                          <option *ngIf="!c.unit" [value]="undefined" disabled selected>Rate Unit</option>
                          <option *ngFor="let r of getCommon('chemicalRateUnits')" [value]="r.id">{{r.value}}</option>
                        </select>
                      </div>
                      <div class="w-100"></div>
                      <div class="col m-1">
                        <button *ngIf="editing" type="button" color="danger" (click)="p.chemicalArray.splice(j, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                          <i class="fa fa-trash" aria-hidden="true"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="editing && !p.chemicalsFull()" class="col mt-1">
                    <button type="button" color="success" (click)="addTractorChemical(i)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                      <i class="fa fa-plus mr-1" aria-hidden="true"></i> Chemical
                    </button>
                  </div>
                </div>
              </div>
              <div class="w-100"></div>
              <div class="col mt-3" *ngIf="editing">
                <button type="button" color="danger" (click)="card.tractorArray.splice(i, 1)" mdbBtn floating="true" size="sm" mdbWavesEffect>
                  <i class="ml-1 fa fa-trash" aria-hidden="true"></i> Tractor Entry
                </button>
              </div>
              <div class="col-sm-12"><div class="w-100"><hr class="divider-sm"/></div></div>
            </div>
          </div>
        </ng-container>
      </div>

      <div class="w-100 my-2"><hr /></div>
    </div>

    <div class="row mt-4" *ngIf="!isShipper()"></div>
  </div>
</div>

<ng-container *ngIf="!isShipper()">
  <button *ngIf="card && editable" type="button" class="btn mt-n2 float-right" (click)="toggleCard()" [class.btn-light]="card.closed" [class.btn-primary]="!card.closed">
  <span *ngIf="card.closed">Reopen <i class="fas fa-upload ml-1"></i></span>
  <span *ngIf="!card.closed">Harvested <i class="fas fa-check ml-1"></i></span>
  </button>
  <button *ngIf="card && editable" type="button" class="btn btn-danger mt-n2 float-right" (click)="deleteCard()">
  <span>Delete </span>
  <i class="fas fa-trash ml-1"></i>
  </button>
  <datalist id="tractorOperators">
    <option *ngFor="let r of getCommon('tractorOperators'); let i = index;" data-id="{{r.id}}" [value]="(i+1) + ' - ' + r.value">
  </datalist>
  <datalist id="irrigators">
    <option *ngFor="let r of getCommon('irrigators'); let i = index;" data-id="{{r.id}}" [value]="(i+1) + ' - ' + r.value">
  </datalist>
</ng-container>